<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style.css">
    <Script src=";/js/script.js" defer>
    </Script>

    <title>Brocos Queblados 2 players</title>
    <style>
        body {
            background-color: rgb(0, 0, 0);
        }
        
        h1 {
            color: white;
            text-align: center;
        }
        
        p {
            color: whitesmoke font-family verdana;
            font-size: 25px;
        }
    </style>
</head>

<div class="game-boards" id="gameBoards">
    <div class="barra" id="barra"></div>
    <div class="bola" id="bola"></div>
</div>
<script>
    const board = document.getElementById('gameBoard');
    const barra = document.getElementById('barra');
    const bola = document.getElementById('bola');

    let bolaX = 375; // posição inicial 
    let bolaY = 450;
    let velocidadeX = 3;
    let velocidadeY = -3;
    let barraX = 335;
    const barraLargura = 100;

    const linhas = 3;
    const colunas = 9;
    const blocoLargura = 75;
    const blocoAltura = 50;
    const espacamento = 5;
    const blocos = [];

    const larguraTotal = colunas * blocoLargura + (colunas - 1) * espacamento;
    const inicioX = (board.clientWidth - larguraTotal) / 2;

    const inicioY = 25; // Criar blocos (9x4) 
    for (let l = 0; l < linhas; l++) {
        for (let c = 0; c < colunas; c++) {
            const bloco = document.createElement('div');
            bloco.classList.add('bloco');
            bloco.style.position = 'absolute';
            bloco.style.left = inicioX + c * (blocoLargura + espacamento) + 'px';
            bloco.style.top = inicioY + l * (blocoAltura + espacamento) + 'px';
            bloco.style.width = blocoLargura + 'px';
            bloco.style.height = blocoAltura + 'px';
            bloco.style.backgroundColor = ['#0095DD', '#FF4136', '#2ECC40'][l % 3];
            board.appendChild(bloco);
            blocos.push(bloco);
        }
    }
    let teclaEsquerda = false;
    let teclaDireita = false;
    const velocidadeBarra = 6; // Movimento com teclado 
    document.addEventListener('keydown', (e) => {
        if (e.key === 'a' || e.key === 'A') teclaEsquerda = true;
        if (e.key === 'd' || e.key === 'D') teclaDireita = true;
    });
    document.addEventListener('keyup', (e) => {
        if (e.key === 'a' || e.key === 'A') teclaEsquerda = false;
        if (e.key === 'd' || e.key === 'D') teclaDireita = false;
    });

    function atualizar() { // movimentação da barra 
        if (teclaEsquerda) barraX -= velocidadeBarra;
        if (teclaDireita) barraX += velocidadeBarra;
        barraX = Math.max(0, Math.min(board.clientWidth - barraLargura, barraX));
        barra.style.left = barraX + 'px';
        bolaX += velocidadeX;
        bolaY += velocidadeY;

        // colisões com paredes 
        if (bolaX <= 0 || bolaX + 12 >= board.clientWidth) velocidadeX *= -1;
        if (bolaY <= 0) velocidadeY *= -1;

        // colisão com a barra 
        if (bolaY + 12 >= board.clientHeight - 30 && bolaX + 12 > barraX && bolaX < barraX + barraLargura) {
            velocidadeY *= -1;
        }

        // colisão com blocos 
        for (let i = 0; i < blocos.length; i++) {
            const b = blocos[i];
            if (!b) continue;
            const bx = b.offsetLeft;
            const by = b.offsetTop;
            if (bolaX + 12 > bx && bolaX < bx + blocoLargura && bolaY + 12 > by && bolaY < by + blocoAltura) {
                b.remove();
                blocos[i] = null;
                velocidadeY *= -1;
                break;
            }
        }

        // se a bola cair 
        if (bolaY > board.clientHeight - 1) {

            document.location.reload();
        }
        bola.style.left = bolaX + 'px';
        bola.style.top = bolaY + 'px';
        requestAnimationFrame(atualizar);
    }
    atualizar();
</script>
</script>
</body>



</html>